<?php

/**
 * Implements of hook_menu();
 */
function sbadmin2_helper_menu() {
    $items = array();
    $items['login'] = array(
        'title' => 'Login',
        'description' => 'Login Page.',
        'page callback' => 'sbadmin2_helper_login_page_callback',
        'access callback' => true,
        'weight' => -10,
        'type' => MENU_CALLBACK,
    );
    $items['front'] = array(
        'title' => 'Front',
        'description' => 'Front Page.',
        'page callback' => 'sbadmin2_helper_front_page_callback',
        'access callback' => true,
        'weight' => -10,
        'type' => MENU_CALLBACK,
    );
    return $items;
}

/**
 * Callback of /login.
 */
function sbadmin2_helper_login_page_callback() {
    global $user;
    if ($user->uid) {
        return drupal_goto();
    }
    $block = block_load('user', 'login');
    return _block_get_renderable_array(_block_render_blocks(array($block)));
}

/**
 * Callback of /front.
 */
function sbadmin2_helper_front_page_callback() {
    global $user;
    if (user_is_anonymous()) {
        return drupal_goto('login');
    }
    return drupal_goto('user');
}

/**
 * Implements hook_library_alter().
 */
function sbadmin2_helper_library_alter(&$libraries, $module) {
    if (!path_is_admin(current_path())) {
        $libraries['jquery']['version'] = '3.3.1';
        $libraries['jquery']['js']['misc/jquery.js']['data'] = drupal_get_path('module', 'sbadmin2_helper').'/vendor/jquery/3.3.1/jquery.min.js';
    }
}

/**
 * Implements hook_js_alter().
 */
function sbadmin2_helper_js_alter(&$javascript) {
    foreach ($javascript as $key => &$value) {
        switch ($key) {
            // case 'settings':
                // continue;
            default:
                $value['scope'] = 'footer';
                break;
        }
    }
}
